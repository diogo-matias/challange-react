{"ast":null,"code":"import _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nvar _excluded = [\"id\"];\nimport { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { api } from \"../../services/api\";\nvar initialState = {\n  clientes: [],\n  isLoading: false,\n  error: null,\n  selectedCliente: null\n};\nexport var fetchClientes = createAsyncThunk('clientes/fetchClientes', function () {\n  var _ref2 = _asyncToGenerator(function* (_, _ref) {\n    var rejectWithValue = _ref.rejectWithValue;\n    try {\n      var response = yield api.get('/clientes');\n      return response.data;\n    } catch (error) {\n      var _error$response, _error$response$data;\n      return rejectWithValue(((_error$response = error.response) == null ? void 0 : (_error$response$data = _error$response.data) == null ? void 0 : _error$response$data.message) || 'Erro ao carregar clientes');\n    }\n  });\n  return function (_x, _x2) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nexport var createCliente = createAsyncThunk('clientes/createCliente', function () {\n  var _ref4 = _asyncToGenerator(function* (clienteData, _ref3) {\n    var rejectWithValue = _ref3.rejectWithValue;\n    try {\n      var response = yield api.post('/clientes', clienteData);\n      return response.data;\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      return rejectWithValue(((_error$response2 = error.response) == null ? void 0 : (_error$response2$data = _error$response2.data) == null ? void 0 : _error$response2$data.message) || 'Erro ao criar cliente');\n    }\n  });\n  return function (_x3, _x4) {\n    return _ref4.apply(this, arguments);\n  };\n}());\nexport var updateCliente = createAsyncThunk('clientes/updateCliente', function () {\n  var _ref6 = _asyncToGenerator(function* (clienteData, _ref5) {\n    var rejectWithValue = _ref5.rejectWithValue;\n    try {\n      var id = clienteData.id,\n        updateData = _objectWithoutProperties(clienteData, _excluded);\n      var response = yield api.patch(`/clientes/${id}`, updateData);\n      return response.data;\n    } catch (error) {\n      var _error$response3, _error$response3$data;\n      return rejectWithValue(((_error$response3 = error.response) == null ? void 0 : (_error$response3$data = _error$response3.data) == null ? void 0 : _error$response3$data.message) || 'Erro ao atualizar cliente');\n    }\n  });\n  return function (_x5, _x6) {\n    return _ref6.apply(this, arguments);\n  };\n}());\nexport var deleteCliente = createAsyncThunk('clientes/deleteCliente', function () {\n  var _ref8 = _asyncToGenerator(function* (id, _ref7) {\n    var rejectWithValue = _ref7.rejectWithValue;\n    try {\n      yield api.delete(`/clientes/test/${id}`);\n      return id;\n    } catch (error) {\n      var _error$response4, _error$response4$data;\n      return rejectWithValue(((_error$response4 = error.response) == null ? void 0 : (_error$response4$data = _error$response4.data) == null ? void 0 : _error$response4$data.message) || 'Erro ao excluir cliente');\n    }\n  });\n  return function (_x7, _x8) {\n    return _ref8.apply(this, arguments);\n  };\n}());\nvar clientesSlice = createSlice({\n  name: 'clientes',\n  initialState: initialState,\n  reducers: {\n    setSelectedCliente: function setSelectedCliente(state, action) {\n      state.selectedCliente = action.payload;\n    },\n    clearSelectedCliente: function clearSelectedCliente(state) {\n      state.selectedCliente = null;\n    },\n    clearError: function clearError(state) {\n      state.error = null;\n    }\n  },\n  extraReducers: function extraReducers(builder) {\n    builder.addCase(fetchClientes.pending, function (state) {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(fetchClientes.fulfilled, function (state, action) {\n      state.isLoading = false;\n      state.clientes = action.payload;\n    }).addCase(fetchClientes.rejected, function (state, action) {\n      state.isLoading = false;\n      state.error = action.payload;\n    }).addCase(createCliente.fulfilled, function (state, action) {\n      state.clientes.push(action.payload);\n    }).addCase(createCliente.rejected, function (state, action) {\n      state.error = action.payload;\n    }).addCase(updateCliente.fulfilled, function (state, action) {\n      var index = state.clientes.findIndex(function (cliente) {\n        return cliente.id === action.payload.id;\n      });\n      if (index !== -1) {\n        state.clientes[index] = action.payload;\n      }\n    }).addCase(updateCliente.rejected, function (state, action) {\n      state.error = action.payload;\n    }).addCase(deleteCliente.fulfilled, function (state, action) {\n      state.clientes = state.clientes.filter(function (cliente) {\n        return cliente.id !== action.payload;\n      });\n    }).addCase(deleteCliente.rejected, function (state, action) {\n      state.error = action.payload;\n    });\n  }\n});\nvar _clientesSlice$action = clientesSlice.actions,\n  setSelectedCliente = _clientesSlice$action.setSelectedCliente,\n  clearSelectedCliente = _clientesSlice$action.clearSelectedCliente,\n  clearError = _clientesSlice$action.clearError;\nexport { setSelectedCliente, clearSelectedCliente, clearError };\nexport default clientesSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","api","initialState","clientes","isLoading","error","selectedCliente","fetchClientes","_ref2","_asyncToGenerator","_","_ref","rejectWithValue","response","get","data","_error$response","_error$response$data","message","_x","_x2","apply","arguments","createCliente","_ref4","clienteData","_ref3","post","_error$response2","_error$response2$data","_x3","_x4","updateCliente","_ref6","_ref5","id","updateData","_objectWithoutProperties","_excluded","patch","_error$response3","_error$response3$data","_x5","_x6","deleteCliente","_ref8","_ref7","delete","_error$response4","_error$response4$data","_x7","_x8","clientesSlice","name","reducers","setSelectedCliente","state","action","payload","clearSelectedCliente","clearError","extraReducers","builder","addCase","pending","fulfilled","rejected","push","index","findIndex","cliente","filter","_clientesSlice$action","actions","reducer"],"sources":["C:/Users/diogo/OneDrive/Desktop/learning/loja-challenge/frontend/src/store/slices/clientesSlice.ts"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport { ClientesState, CreateClienteData, UpdateClienteData } from '../types';\r\nimport { api } from '../../services/api';\r\n\r\nconst initialState: ClientesState = {\r\n  clientes: [],\r\n  isLoading: false,\r\n  error: null,\r\n  selectedCliente: null,\r\n};\r\n\r\nexport const fetchClientes = createAsyncThunk(\r\n  'clientes/fetchClientes',\r\n  async (_, { rejectWithValue }) => {\r\n    try {\r\n      const response = await api.get('/clientes');\r\n      return response.data;\r\n    } catch (error: any) {\r\n      return rejectWithValue(error.response?.data?.message || 'Erro ao carregar clientes');\r\n    }\r\n  }\r\n);\r\n\r\nexport const createCliente = createAsyncThunk(\r\n  'clientes/createCliente',\r\n  async (clienteData: CreateClienteData, { rejectWithValue }) => {\r\n    try {\r\n      const response = await api.post('/clientes', clienteData);\r\n      return response.data;\r\n    } catch (error: any) {\r\n      return rejectWithValue(error.response?.data?.message || 'Erro ao criar cliente');\r\n    }\r\n  }\r\n);\r\n\r\nexport const updateCliente = createAsyncThunk(\r\n  'clientes/updateCliente',\r\n  async (clienteData: UpdateClienteData, { rejectWithValue }) => {\r\n    try {\r\n      const { id, ...updateData } = clienteData;\r\n      const response = await api.patch(`/clientes/${id}`, updateData);\r\n      return response.data;\r\n    } catch (error: any) {\r\n      return rejectWithValue(error.response?.data?.message || 'Erro ao atualizar cliente');\r\n    }\r\n  }\r\n);\r\n\r\nexport const deleteCliente = createAsyncThunk(\r\n  'clientes/deleteCliente',\r\n  async (id: number, { rejectWithValue }) => {\r\n    try {\r\n      await api.delete(`/clientes/test/${id}`);\r\n      return id;\r\n    } catch (error: any) {\r\n      return rejectWithValue(error.response?.data?.message || 'Erro ao excluir cliente');\r\n    }\r\n  }\r\n);\r\n\r\nconst clientesSlice = createSlice({\r\n  name: 'clientes',\r\n  initialState,\r\n  reducers: {\r\n    setSelectedCliente: (state: ClientesState, action) => {\r\n      state.selectedCliente = action.payload;\r\n    },\r\n    clearSelectedCliente: (state: ClientesState) => {\r\n      state.selectedCliente = null;\r\n    },\r\n    clearError: (state: ClientesState) => {\r\n      state.error = null;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      // Fetch Clientes\r\n      .addCase(fetchClientes.pending, (state: ClientesState) => {\r\n        state.isLoading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(fetchClientes.fulfilled, (state: ClientesState, action) => {\r\n        state.isLoading = false;\r\n        state.clientes = action.payload;\r\n      })\r\n      .addCase(fetchClientes.rejected, (state: ClientesState, action) => {\r\n        state.isLoading = false;\r\n        state.error = action.payload as string;\r\n      })\r\n      // Create Cliente\r\n      .addCase(createCliente.fulfilled, (state: ClientesState, action) => {\r\n        state.clientes.push(action.payload);\r\n      })\r\n      .addCase(createCliente.rejected, (state: ClientesState, action) => {\r\n        state.error = action.payload as string;\r\n      })\r\n      // Update Cliente\r\n      .addCase(updateCliente.fulfilled, (state: ClientesState, action) => {\r\n        const index = state.clientes.findIndex(cliente => cliente.id === action.payload.id);\r\n        if (index !== -1) {\r\n          state.clientes[index] = action.payload;\r\n        }\r\n      })\r\n      .addCase(updateCliente.rejected, (state: ClientesState, action) => {\r\n        state.error = action.payload as string;\r\n      })\r\n      // Delete Cliente\r\n      .addCase(deleteCliente.fulfilled, (state: ClientesState, action) => {\r\n        state.clientes = state.clientes.filter(cliente => cliente.id !== action.payload);\r\n      })\r\n      .addCase(deleteCliente.rejected, (state: ClientesState, action) => {\r\n        state.error = action.payload as string;\r\n      });\r\n  },\r\n});\r\n\r\nexport const { setSelectedCliente, clearSelectedCliente, clearError } = clientesSlice.actions;\r\nexport default clientesSlice.reducer; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}