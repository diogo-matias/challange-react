{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { api } from \"../../services/api\";\nvar initialState = {\n  vendas: [],\n  vendasPorDia: [],\n  estatisticas: null,\n  isLoading: false,\n  error: null\n};\nexport var fetchVendasPorDia = createAsyncThunk('vendas/fetchVendasPorDia', function () {\n  var _ref2 = _asyncToGenerator(function* (_, _ref) {\n    var rejectWithValue = _ref.rejectWithValue;\n    try {\n      var response = yield api.get('/vendas/por-dia');\n      var vendasOrdenadas = response.data.sort(function (a, b) {\n        return new Date(a.data).getTime() - new Date(b.data).getTime();\n      });\n      return vendasOrdenadas;\n    } catch (error) {\n      var _error$response, _error$response$data;\n      return rejectWithValue(((_error$response = error.response) == null ? void 0 : (_error$response$data = _error$response.data) == null ? void 0 : _error$response$data.message) || 'Erro ao carregar vendas por dia');\n    }\n  });\n  return function (_x, _x2) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nexport var fetchEstatisticas = createAsyncThunk('vendas/fetchEstatisticas', function () {\n  var _ref4 = _asyncToGenerator(function* (_, _ref3) {\n    var rejectWithValue = _ref3.rejectWithValue;\n    try {\n      var response = yield api.get('/vendas/estatisticas');\n      return response.data;\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      return rejectWithValue(((_error$response2 = error.response) == null ? void 0 : (_error$response2$data = _error$response2.data) == null ? void 0 : _error$response2$data.message) || 'Erro ao carregar estatísticas');\n    }\n  });\n  return function (_x3, _x4) {\n    return _ref4.apply(this, arguments);\n  };\n}());\nexport var createVenda = createAsyncThunk('vendas/createVenda', function () {\n  var _ref6 = _asyncToGenerator(function* (vendaData, _ref5) {\n    var rejectWithValue = _ref5.rejectWithValue;\n    try {\n      var response = yield api.post('/vendas', vendaData);\n      return response.data;\n    } catch (error) {\n      var _error$response3, _error$response3$data;\n      return rejectWithValue(((_error$response3 = error.response) == null ? void 0 : (_error$response3$data = _error$response3.data) == null ? void 0 : _error$response3$data.message) || 'Erro ao criar venda');\n    }\n  });\n  return function (_x5, _x6) {\n    return _ref6.apply(this, arguments);\n  };\n}());\nexport var fetchVendasByCliente = createAsyncThunk('vendas/fetchVendasByCliente', function () {\n  var _ref8 = _asyncToGenerator(function* (clienteId, _ref7) {\n    var rejectWithValue = _ref7.rejectWithValue;\n    try {\n      var response = yield api.get(`/vendas/cliente/${clienteId}`);\n      return response.data;\n    } catch (error) {\n      var _error$response4, _error$response4$data;\n      return rejectWithValue(((_error$response4 = error.response) == null ? void 0 : (_error$response4$data = _error$response4.data) == null ? void 0 : _error$response4$data.message) || 'Erro ao carregar vendas do cliente');\n    }\n  });\n  return function (_x7, _x8) {\n    return _ref8.apply(this, arguments);\n  };\n}());\nvar vendasSlice = createSlice({\n  name: 'vendas',\n  initialState: initialState,\n  reducers: {\n    clearError: function clearError(state) {\n      state.error = null;\n    }\n  },\n  extraReducers: function extraReducers(builder) {\n    builder.addCase(fetchVendasPorDia.pending, function (state) {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(fetchVendasPorDia.fulfilled, function (state, action) {\n      state.isLoading = false;\n      state.vendasPorDia = action.payload;\n    }).addCase(fetchVendasPorDia.rejected, function (state, action) {\n      state.isLoading = false;\n      state.error = action.payload;\n    }).addCase(fetchEstatisticas.fulfilled, function (state, action) {\n      state.estatisticas = action.payload;\n    }).addCase(fetchEstatisticas.rejected, function (state, action) {\n      state.error = action.payload;\n    }).addCase(createVenda.fulfilled, function (state, action) {\n      state.vendas.push(action.payload);\n    }).addCase(createVenda.rejected, function (state, action) {\n      state.error = action.payload;\n    }).addCase(fetchVendasByCliente.fulfilled, function (state, action) {\n      state.vendas = action.payload;\n    }).addCase(fetchVendasByCliente.rejected, function (state, action) {\n      state.error = action.payload;\n    });\n  }\n});\nvar clearError = vendasSlice.actions.clearError;\nexport { clearError };\nexport default vendasSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","api","initialState","vendas","vendasPorDia","estatisticas","isLoading","error","fetchVendasPorDia","_ref2","_asyncToGenerator","_","_ref","rejectWithValue","response","get","vendasOrdenadas","data","sort","a","b","Date","getTime","_error$response","_error$response$data","message","_x","_x2","apply","arguments","fetchEstatisticas","_ref4","_ref3","_error$response2","_error$response2$data","_x3","_x4","createVenda","_ref6","vendaData","_ref5","post","_error$response3","_error$response3$data","_x5","_x6","fetchVendasByCliente","_ref8","clienteId","_ref7","_error$response4","_error$response4$data","_x7","_x8","vendasSlice","name","reducers","clearError","state","extraReducers","builder","addCase","pending","fulfilled","action","payload","rejected","push","actions","reducer"],"sources":["C:/Users/diogo/OneDrive/Desktop/learning/loja-challenge/frontend/src/store/slices/vendasSlice.ts"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport { VendasState, CreateVendaData } from '../types';\r\nimport { api } from '../../services/api';\r\n\r\nconst initialState: VendasState = {\r\n  vendas: [],\r\n  vendasPorDia: [],\r\n  estatisticas: null,\r\n  isLoading: false,\r\n  error: null,\r\n};\r\n\r\nexport const fetchVendasPorDia = createAsyncThunk(\r\n  'vendas/fetchVendasPorDia',\r\n  async (_, { rejectWithValue }) => {\r\n    try {\r\n      const response = await api.get('/vendas/por-dia');\r\n      const vendasOrdenadas = response.data.sort((a: any, b: any) => \r\n        new Date(a.data).getTime() - new Date(b.data).getTime()\r\n      );\r\n      return vendasOrdenadas;\r\n    } catch (error: any) {\r\n      return rejectWithValue(error.response?.data?.message || 'Erro ao carregar vendas por dia');\r\n    }\r\n  }\r\n);\r\n\r\nexport const fetchEstatisticas = createAsyncThunk(\r\n  'vendas/fetchEstatisticas',\r\n  async (_, { rejectWithValue }) => {\r\n    try {\r\n      const response = await api.get('/vendas/estatisticas');\r\n      return response.data;\r\n    } catch (error: any) {\r\n      return rejectWithValue(error.response?.data?.message || 'Erro ao carregar estatísticas');\r\n    }\r\n  }\r\n);\r\n\r\nexport const createVenda = createAsyncThunk(\r\n  'vendas/createVenda',\r\n  async (vendaData: CreateVendaData, { rejectWithValue }) => {\r\n    try {\r\n      const response = await api.post('/vendas', vendaData);\r\n      return response.data;\r\n    } catch (error: any) {\r\n      return rejectWithValue(error.response?.data?.message || 'Erro ao criar venda');\r\n    }\r\n  }\r\n);\r\n\r\nexport const fetchVendasByCliente = createAsyncThunk(\r\n  'vendas/fetchVendasByCliente',\r\n  async (clienteId: number, { rejectWithValue }) => {\r\n    try {\r\n      const response = await api.get(`/vendas/cliente/${clienteId}`);\r\n      return response.data;\r\n    } catch (error: any) {\r\n      return rejectWithValue(error.response?.data?.message || 'Erro ao carregar vendas do cliente');\r\n    }\r\n  }\r\n);\r\n\r\nconst vendasSlice = createSlice({\r\n  name: 'vendas',\r\n  initialState,\r\n  reducers: {\r\n    clearError: (state) => {\r\n      state.error = null;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      // Fetch Vendas por Dia\r\n      .addCase(fetchVendasPorDia.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(fetchVendasPorDia.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.vendasPorDia = action.payload;\r\n      })\r\n      .addCase(fetchVendasPorDia.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.error = action.payload as string;\r\n      })\r\n      // Fetch Estatísticas\r\n      .addCase(fetchEstatisticas.fulfilled, (state, action) => {\r\n        state.estatisticas = action.payload;\r\n      })\r\n      .addCase(fetchEstatisticas.rejected, (state, action) => {\r\n        state.error = action.payload as string;\r\n      })\r\n      // Create Venda\r\n      .addCase(createVenda.fulfilled, (state, action) => {\r\n        state.vendas.push(action.payload);\r\n      })\r\n      .addCase(createVenda.rejected, (state, action) => {\r\n        state.error = action.payload as string;\r\n      })\r\n      // Fetch Vendas by Cliente\r\n      .addCase(fetchVendasByCliente.fulfilled, (state, action) => {\r\n        state.vendas = action.payload;\r\n      })\r\n      .addCase(fetchVendasByCliente.rejected, (state, action) => {\r\n        state.error = action.payload as string;\r\n      });\r\n  },\r\n});\r\n\r\nexport const { clearError } = vendasSlice.actions;\r\nexport default vendasSlice.reducer; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}